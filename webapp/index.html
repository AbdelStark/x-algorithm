<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Virality Simulator</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="background-shape shape-one"></div>
  <div class="background-shape shape-two"></div>

  <main class="page">
    <header class="hero">
      <div>
        <p class="eyebrow">X For You Algorithm Emulator</p>
        <h1>Virality Simulator</h1>
        <p class="subhead">Estimate a tweet's viral potential using a transparent, weighted-action model inspired by the For You pipeline.</p>
      </div>
      <div class="hero-card">
        <p class="hero-label">Model lens</p>
        <p class="hero-title">Weighted engagement forecast</p>
        <p class="hero-note">Uses action probabilities (like, reply, repost, click) and negative signals to simulate ranking lift.</p>
      </div>
    </header>

    <section class="grid">
      <div class="panel input-panel">
        <h2>Tweet Inputs</h2>

        <label class="field">
          <span>Tweet text</span>
          <textarea id="tweetText" rows="5" placeholder="Paste or type your tweet..."></textarea>
        </label>

        <div class="row">
          <label class="field">
            <span>Followers</span>
            <input id="followers" type="number" min="0" value="1000" />
          </label>
          <label class="field">
            <span>Following</span>
            <input id="following" type="number" min="0" value="500" />
          </label>
        </div>

        <div class="row">
          <label class="field">
            <span>Account age (days)</span>
            <input id="accountAge" type="number" min="0" value="365" />
          </label>
          <label class="field">
            <span>Avg engagement rate</span>
            <input id="engagementRate" type="number" min="0" max="1" step="0.01" value="0.02" />
          </label>
        </div>

        <div class="row">
          <label class="field">
            <span>Posts per day</span>
            <input id="postsPerDay" type="number" min="0" step="0.1" value="2" />
          </label>
          <label class="field">
            <span>Post hour (0-23)</span>
            <input id="hour" type="number" min="0" max="23" value="12" />
          </label>
        </div>

        <div class="row">
          <label class="field">
            <span>Media type</span>
            <select id="media">
              <option value="none">None</option>
              <option value="image">Image</option>
              <option value="video">Video</option>
              <option value="gif">GIF</option>
            </select>
          </label>
          <label class="field checkbox">
            <input id="hasLink" type="checkbox" />
            <span>Includes link</span>
          </label>
          <label class="field checkbox">
            <input id="verified" type="checkbox" />
            <span>Verified</span>
          </label>
        </div>

        <div class="slider-group">
          <label class="field slider">
            <span>Novelty <strong id="noveltyValue">0.50</strong></span>
            <input id="novelty" type="range" min="0" max="1" step="0.01" value="0.5" />
          </label>
          <label class="field slider">
            <span>Timeliness <strong id="timelinessValue">0.50</strong></span>
            <input id="timeliness" type="range" min="0" max="1" step="0.01" value="0.5" />
          </label>
          <label class="field slider">
            <span>Audience fit <strong id="audienceFitValue">0.60</strong></span>
            <input id="audienceFit" type="range" min="0" max="1" step="0.01" value="0.6" />
          </label>
          <label class="field slider">
            <span>Topic saturation <strong id="topicSaturationValue">0.50</strong></span>
            <input id="topicSaturation" type="range" min="0" max="1" step="0.01" value="0.5" />
          </label>
          <label class="field slider">
            <span>Controversy <strong id="controversyValue">0.30</strong></span>
            <input id="controversy" type="range" min="0" max="1" step="0.01" value="0.3" />
          </label>
          <label class="field slider">
            <span>Sentiment <strong id="sentimentValue">0.10</strong></span>
            <input id="sentiment" type="range" min="-1" max="1" step="0.01" value="0.1" />
          </label>
        </div>

        <label class="field checkbox">
          <input id="useAi" type="checkbox" />
          <span>Use Grok analysis (requires local server)</span>
        </label>

        <button id="simulate">Simulate virality</button>
        <p class="note">This tool is heuristic and does not use X production data. AI mode requires `cargo run -- serve`.</p>
      </div>

      <div class="panel output-panel">
        <div class="warning" id="warnings"></div>
        <div class="score-card">
          <div class="score-ring" id="scoreRing">
            <div>
              <p class="score-label">Virality score</p>
              <h3 id="scoreValue">0.0</h3>
              <p class="score-tier" id="scoreTier">Low</p>
            </div>
          </div>
          <div class="score-details">
            <p>Weighted score <strong id="weightedScore">0.00</strong></p>
            <p>Total impressions <strong id="impressionsTotal">0</strong></p>
            <p>In-network <strong id="impressionsIn">0</strong></p>
            <p>Out-of-network <strong id="impressionsOon">0</strong></p>
          </div>
        </div>

        <div class="panel-section">
          <h3>Engagement forecast</h3>
          <div class="metric-note">Unique engaged users <strong id="uniqueEngagements">0</strong> (<span id="uniqueRate">0.0%</span>)</div>
          <div class="metric-note">Total action volume <strong id="actionVolume">0</strong> (<span id="actionRate">0.00</span> actions per impression)</div>
          <div class="stats-grid">
            <div><span>Likes</span><strong id="likes">0</strong></div>
            <div><span>Replies</span><strong id="replies">0</strong></div>
            <div><span>Reposts</span><strong id="reposts">0</strong></div>
            <div><span>Shares</span><strong id="shares">0</strong></div>
          </div>
        </div>

        <div class="panel-section">
          <h3>Signals</h3>
          <div class="signal-list" id="signalList"></div>
        </div>

        <div class="panel-section">
          <h3>Suggestions</h3>
          <ul class="suggestions" id="suggestions"></ul>
        </div>

        <details class="panel-section">
          <summary>Action probabilities</summary>
          <div class="prob-grid" id="probabilities"></div>
        </details>
      </div>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
